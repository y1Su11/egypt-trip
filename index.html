<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>埃及行程 Timeline & Wiki</title>
  <style>
    :root {
      --line-color: #d0d0ff;
      --accent: #6c5ce7;
      --accent-soft: #f3f0ff;
      --text-main: #222;
      --text-sub: #555;
      --bg: #fafbff;
      --card-bg: #ffffff;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #f8f7ff 0, #f0f4ff 30%, #f5f7fb 100%);
      color: var(--text-main);
    }

    header {
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(10px);
      background: rgba(250, 251, 255, 0.96);
      border-bottom: 1px solid rgba(0, 0, 0, 0.04);
      padding: 10px 24px 6px;
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      gap: 6px 16px;
    }

    header h1 {
      margin: 0;
      font-size: 20px;
    }

    header .subtitle {
      font-size: 13px;
      color: var(--text-sub);
    }

    header .now {
      margin-left: auto;
      font-size: 13px;
      color: var(--accent);
      white-space: nowrap;
    }

    .page-nav {
      width: 100%;
      display: flex;
      gap: 8px;
      margin-top: 4px;
      flex-wrap: wrap;
    }

    .nav-btn {
      border-radius: 999px;
      padding: 4px 14px;
      font-size: 13px;
      border: 1px solid rgba(88, 80, 236, 0.3);
      background: rgba(255, 255, 255, 0.9);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .nav-btn.active {
      background: var(--accent);
      color: #fff;
      box-shadow: 0 4px 12px rgba(76, 81, 191, 0.35);
    }

    main {
      max-width: 960px;
      margin: 0 auto;
      padding: 16px 16px 40px;
    }

    .hidden {
      display: none;
    }

    /* Timeline layout */

    .timeline-view {
      margin-top: 4px;
    }

    .timeline {
      position: relative;
      margin-top: 8px;
      padding-left: 32px;
    }

    .timeline::before {
      content: "";
      position: absolute;
      left: 12px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, var(--line-color), #e0e0ff);
      opacity: 0.9;
    }

    .timeline-item {
      position: relative;
      margin-bottom: 18px;
      scroll-margin: 96px;
      transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
    }

    .timeline-item::before {
      content: "";
      position: absolute;
      left: -22px;
      top: 18px;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      border: 3px solid var(--accent);
      background: #fff;
      box-shadow: 0 0 0 4px rgba(108, 92, 231, 0.12);
    }

    .timeline-item.active::before {
      background: var(--accent);
    }

    .timeline-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 12px 14px 10px;
      box-shadow: 0 4px 16px rgba(15, 23, 42, 0.07);
      border: 1px solid rgba(88, 80, 236, 0.09);
    }

    .timeline-item.active .timeline-card {
      background: var(--accent-soft);
      box-shadow: 0 8px 24px rgba(76, 81, 191, 0.2);
      border-color: var(--accent);
      transform: translateY(-2px);
    }

    .top-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px 12px;
      align-items: baseline;
      margin-bottom: 6px;
    }

    .date-tag {
      font-size: 13px;
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(88, 80, 236, 0.08);
      color: var(--accent);
    }

    .time-slot {
      font-size: 13px;
      color: var(--text-sub);
    }

    .city {
      font-size: 14px;
      font-weight: 600;
    }

    .time-range {
      font-size: 12px;
      color: var(--text-sub);
      margin-left: auto;
      white-space: nowrap;
    }

    .plan {
      font-size: 14px;
      margin-bottom: 4px;
    }

    .details {
      font-size: 13px;
      color: var(--text-sub);
      margin-bottom: 4px;
    }

    .details ul {
      margin: 2px 0 2px 18px;
      padding: 0;
    }

    .details li {
      margin-bottom: 1px;
    }

    .meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px 12px;
      font-size: 12px;
      margin-top: 4px;
    }

    .meta-label {
      font-weight: 600;
      color: var(--text-sub);
    }

    .meta-note {
      flex: 1 1 auto;
    }

    .meta-hotel {
      flex: 1 1 100%;
    }

    .meta-cost {
      white-space: nowrap;
    }

    /* Wiki layout */

    .wiki-view {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .wiki-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 12px 14px 12px;
      box-shadow: 0 4px 16px rgba(15, 23, 42, 0.07);
      border: 1px solid rgba(88, 80, 236, 0.09);
    }

    .wiki-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .wiki-subtitle {
      font-size: 13px;
      color: var(--text-sub);
      margin-bottom: 8px;
    }

    .num-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    .num-table th,
    .num-table td {
      border: 1px solid #e0e3ff;
      padding: 4px 6px;
      text-align: center;
    }

    .num-table th {
      background: #f5f6ff;
      font-weight: 600;
    }

    .egp-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 12px;
    }

    .egp-img-wrap {
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: flex-start;
    }

    .egp-img {
      max-width: 100%;
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    .egp-caption {
      font-size: 12px;
      color: var(--text-sub);
    }

    @media (max-width: 768px) {
      .egp-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 640px) {
      header {
        padding: 8px 12px 4px;
      }
      main {
        padding: 12px 10px 32px;
      }
      .timeline {
        padding-left: 26px;
      }
      .timeline-item::before {
        left: -18px;
      }
      .now {
        width: 100%;
        text-align: left;
        margin-left: 0;
      }
    }
  </style>
</head>
<body>
  <header>
    <div>
      <h1>埃及行程 · Timeline & Wiki</h1>
      <div class="subtitle">2025-11-21 至 2025-11-30</div>
    </div>
    <div class="now" id="nowText"></div>
    <nav class="page-nav">
      <button class="nav-btn active" data-target="timelineView">Timeline</button>
      <button class="nav-btn" data-target="wikiView">Wiki</button>
    </nav>
  </header>

  <main>
    <!-- 行程视图 -->
    <section class="timeline-view" id="timelineView">
      <section class="timeline" id="timeline"></section>
    </section>

    <!-- Wiki 视图 -->
    <section class="wiki-view hidden" id="wikiView">
      <!-- 数字对应表 -->
      <article class="wiki-card">
        <div class="wiki-title">埃及常用数字（东阿拉伯数字）与阿拉伯数字对照表</div>
        <div class="wiki-subtitle">
          在埃及的票价、菜单、车牌、纸币正面等位置，经常使用东阿拉伯数字（٠١٢٣٤٥٦٧٨٩）。下面的表格给出与常见阿拉伯数字（0–9）的对应关系。:contentReference[oaicite:2]{index=2}
        </div>
        <table class="num-table">
          <thead>
            <tr>
              <th>阿拉伯数字</th>
              <th>埃及常用数字</th>
              <th>示例金额写法</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>0</td><td>٠</td><td>٠ ج.م （0 埃磅）</td></tr>
            <tr><td>1</td><td>١</td><td>١ ج.م （1 埃磅）</td></tr>
            <tr><td>2</td><td>٢</td><td>٢ ج.م</td></tr>
            <tr><td>3</td><td>٣</td><td>٣ ج.م</td></tr>
            <tr><td>4</td><td>٤</td><td>٤ ج.م</td></tr>
            <tr><td>5</td><td>٥</td><td>٥ ج.م</td></tr>
            <tr><td>6</td><td>٦</td><td>٦ ج.م</td></tr>
            <tr><td>7</td><td>٧</td><td>٧ ج.م</td></tr>
            <tr><td>8</td><td>٨</td><td>٨ ج.م</td></tr>
            <tr><td>9</td><td>٩</td><td>٩ ج.م</td></tr>
          </tbody>
        </table>
      </article>

      <!-- 埃磅介绍 + 图片 -->
      <article class="wiki-card">
        <div class="wiki-title">埃及货币：埃磅（Egyptian Pound, EGP）</div>
        <div class="wiki-subtitle">
          埃及法定货币为埃及镑（Egyptian pound），ISO 代码 <strong>EGP</strong>，常见记号有 <strong>E£ / LE / ج.م</strong>。一埃磅等于 100 皮阿斯特（piastre / qirsh）。
        </div>

        <div class="egp-grid">

          <div class="egp-img-wrap">
            <div class="egp-caption"><a href="https://en.wikipedia.org/wiki/Egyptian_pound#Coins" target="_blank">硬币示例：参见Wikipedia</div>

            <div class="egp-caption"><a href="https://en.wikipedia.org/wiki/Egyptian_pound#Banknotes" target="_blank">纸币示例：参见Wikipedia</div>
          </div>
        </div>
      </article>
    </section>
  </main>

  <script>
    const TRIP_TIMEZONE = "Africa/Cairo";

    // 顶部菜单切换
    const navButtons = document.querySelectorAll(".nav-btn");
    const views = {
      timelineView: document.getElementById("timelineView"),
      wikiView: document.getElementById("wikiView")
    };

    navButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        navButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        const target = btn.dataset.target;
        Object.entries(views).forEach(([id, el]) => {
          if (id === target) {
            el.classList.remove("hidden");
          } else {
            el.classList.add("hidden");
          }
        });
      });
    });

    // 行程数据（与之前相同，补全了酒店信息）
    const tripBlocks = [
      {
        id: "2025-11-21-hurghada-arrival",
        date: "2025-11-21",
        weekday: "周五",
        timeSlot: "全天",
        city: "赫尔格达",
        plan: "从德国出发，经慕尼黑或法兰克福飞往赫尔格达，抵达后入住公寓，晚间自由活动。",
        details: [
          "MUC → HRG · Condor DE24 · 08:20 – 13:30",
          "FRA → HRG · Condor DE30 · 10:30 – 16:05",
          "FRA → HRG · Lufthansa LH4374（待补充替代）"
        ],
        note: "机场安排司机接机，送达公寓。",
        hotel: "Lilly Apartments Agency, Turkish Air Lines Building, Elhadaba Rd, Hurghada, Red Sea Governorate 84517, Egypt",
        cost: "待补充替代",
        startTime: "08:00",
        endTime: "23:00"
      },
      {
        id: "2025-11-22-hurghada-dolphin",
        date: "2025-11-22",
        weekday: "周六",
        timeSlot: "白天",
        city: "赫尔格达",
        plan: "追海豚与浮潜一日游，傍晚返回赫尔格达，自由活动。",
        details: [
          "船上行程：海豚观赏、浮潜等（具体船公司与时刻待补充替代）"
        ],
        note: "携带泳具、防晒用品等，晚间在赫尔格达市区活动。",
        hotel: "Lilly Apartments Agency, Turkish Air Lines Building, Elhadaba Rd, Hurghada, Red Sea Governorate 84517, Egypt",
        cost: "待补充替代",
        startTime: "08:00",
        endTime: "20:00"
      },
      {
        id: "2025-11-23-hurghada-to-luxor",
        date: "2025-11-23",
        weekday: "周日",
        timeSlot: "全天",
        city: "赫尔格达 → 卢克索",
        plan: "早晨从赫尔格达公寓出发前往卢克索，途经丹德拉神庙，下午抵达卢克索入住酒店，晚餐在卢克索市区餐厅。",
        details: [
          "早上 08:00 出发，从赫尔格达经丹德拉前往卢克索，车程约 3 小时。",
          "沿途景点：丹德拉神庙（停留时间待补充替代）。",
          "下午：尼罗河东岸卢克索市区自由活动。",
          "晚餐餐厅推荐：Sofra / Loqma。"
        ],
        note: "车上行程中途安排路餐或午餐（待补充替代）。",
        hotel: "Steigenberger Resort Achti, Al Awameya, East Bank, 83951 Luxor, Egypt",
        cost: "待补充替代",
        startTime: "08:00",
        endTime: "21:30"
      },
      {
        id: "2025-11-24-luxor-balloon-westbank",
        date: "2025-11-24",
        weekday: "周一",
        timeSlot: "清晨至下午",
        city: "卢克索",
        plan: "清晨体验热气球项目，之后前往西岸帝王谷、哈特谢普苏特神庙等景点，午餐在 Oriental 餐厅。",
        details: [
          "清晨：热气球飞行，预计用时约 3 小时，含接送与飞行（集合时间约 06:00，实际以预订为准）。",
          "白天：卢克索西岸观光，景点包括帝王谷、王后谷、女王庙等。",
          "午餐：Oriental 餐厅，时间约 13:30–15:00。"
        ],
        note: "若当天风况不适合热气球，则热气球调整为 11 月 25 日。",
        hotel: "Steigenberger Resort Achti, Al Awameya, East Bank, 83951 Luxor, Egypt",
        cost: "待补充替代",
        startTime: "04:30",
        endTime: "18:30"
      },
      {
        id: "2025-11-25-luxor-eastbank",
        date: "2025-11-25",
        weekday: "周二",
        timeSlot: "白天与夜间",
        city: "卢克索",
        plan: "视天气情况安排热气球备用场次，并参观卡尔纳克神庙与卢克索神庙，夜间观赏夜景。",
        details: [
          "如 11 月 24 日热气球取消，则在 11 月 25 日清晨起飞，时长约 3 小时。",
          "下午：卡尔纳克神庙参观（开放时间待补充替代）。",
          "傍晚或夜间：卢克索神庙夜景。"
        ],
        note: "当日根据热气球安排与景区开放时间进行微调。",
        hotel: "Steigenberger Resort Achti, Al Awameya, East Bank, 83951 Luxor, Egypt",
        cost: "待补充替代",
        startTime: "06:00",
        endTime: "22:00"
      },
      {
        id: "2025-11-26-luxor-to-cairo",
        date: "2025-11-26",
        weekday: "周三",
        timeSlot: "上午至晚上",
        city: "卢克索 → 开罗",
        plan: "上午在卢克索自由活动，下午乘机前往开罗，晚上在金字塔附近酒店入住并自由活动。",
        details: [
          "上午：卢克索市区漫步与自由时间。",
          "下午：卢克索飞往开罗，航班 LXR → CAI · EgyptAir MS75 · 14:20 – 15:30。",
          "晚上：酒店周边自由活动。"
        ],
        note: "航班为 MS75，需提前到达机场办理登机手续。",
        hotel: "West Pyramids Hotel, 4 Abou Al Hool Al Seiahi, Giza, 3514542 Cairo, Egypt",
        cost: "待补充替代",
        startTime: "09:00",
        endTime: "22:30"
      },
      {
        id: "2025-11-27-cairo-old-city",
        date: "2025-11-27",
        weekday: "周四",
        timeSlot: "全天",
        city: "开罗",
        plan: "参观萨拉丁城堡与穆罕默德·阿里清真寺，下午参观埃及博物馆，晚上登开罗塔并在旋转餐厅用餐。",
        details: [
          "上午：萨拉丁城堡 + 穆罕默德·阿里清真寺。",
          "下午：埃及博物馆参观，控制在约 2 小时内。",
          "晚上：开罗塔，旋转餐厅晚餐。"
        ],
        note: "登塔与餐厅建议提前预订时间。",
        hotel: "Classic Style 3 bedrooms Zamalek apartment, Zamalek, Cairo（详细地址待补充替代）",
        cost: "待补充替代",
        startTime: "09:00",
        endTime: "22:30"
      },
      {
        id: "2025-11-28-giza-gem",
        date: "2025-11-28",
        weekday: "周五",
        timeSlot: "全天",
        city: "开罗",
        plan: "前往吉萨金字塔景区与狮身人面像，大埃及博物馆（GEM），晚上休息。",
        details: [
          "上午：吉萨金字塔群 + 狮身人面像。",
          "下午：大埃及博物馆（GEM）参观。",
          "晚上：返回住宿地休息。"
        ],
        note: "GEM 开放安排与参观时段依官网通知更新。",
        hotel: "Classic Style 3 bedrooms Zamalek apartment, Zamalek, Cairo（详细地址待补充替代）",
        cost: "待补充替代",
        startTime: "09:00",
        endTime: "22:00"
      },
      {
        id: "2025-11-29-cairo-museums-bazaar",
        date: "2025-11-29",
        weekday: "周六",
        timeSlot: "全天",
        city: "开罗",
        plan: "参观文明类博物馆与洞穴教堂，下午前往哈利利市集与 Zamalek 半岛 city walk，晚上在本地餐厅用餐。",
        details: [
          "上午：文明类博物馆（具体名称与时间待补充替代）。",
          "中午：洞穴教堂（Cave Church），出发时间参考预订安排。",
          "下午：哈利利市集 + Zamalek 半岛 city walk。",
          "晚上：酒店附近餐厅或轻食。"
        ],
        note: "当日为城市文化与市集体验日，节奏可根据实际情况调整。",
        hotel: "Cairo Heliopolis Apartment, 1, Heliopolis, 11799 Cairo, Egypt",
        cost: "待补充替代",
        startTime: "08:30",
        endTime: "22:30"
      },
      {
        id: "2025-11-30-return-to-germany",
        date: "2025-11-30",
        weekday: "周日",
        timeSlot: "上午至晚上",
        city: "开罗 → 德国",
        plan: "从开罗机场出发，经法兰克福或慕尼黑返回德国，结束本次行程。",
        details: [
          "CAI → MUC · EgyptAir MS787 · 10:05 – 13:10。",
          "CAI → FRA · Lufthansa LH583 · 16:55 – 20:30。",
          "根据机票实际信息选择对应航班。"
        ],
        note: "需预留约 3 小时在机场办理值机与安检等手续。",
        hotel: "无（前一晚入住 Cairo Heliopolis Apartment，清晨退房前往机场）。",
        cost: "待补充替代",
        startTime: "06:00",
        endTime: "23:00"
      }
    ];

    function toZonedDate(dateStr, timeStr, timeZone) {
      const [year, month, day] = dateStr.split("-").map(Number);
      const [hour, minute] = timeStr.split(":").map(Number);
      const utcDate = new Date(Date.UTC(year, month - 1, day, hour, minute));
      const formatter = new Intl.DateTimeFormat("en-US", {
        timeZone,
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "2-digit",
        minute: "2-digit",
        hour12: false
      });
      const parts = formatter.formatToParts(utcDate);
      const obj = {};
      for (const p of parts) obj[p.type] = p.value;
      return new Date(
        Number(obj.year),
        Number(obj.month) - 1,
        Number(obj.day),
        Number(obj.hour),
        Number(obj.minute)
      );
    }

    function getNowInTripTZ() {
      const now = new Date();
      const str = now.toLocaleString("en-US", { timeZone: TRIP_TIMEZONE });
      return new Date(str);
    }

    // 预处理：计算开始结束时间并排序
    tripBlocks.forEach(block => {
      block.startDate = toZonedDate(block.date, block.startTime, TRIP_TIMEZONE);
      block.endDate = toZonedDate(block.date, block.endTime, TRIP_TIMEZONE);
    });
    tripBlocks.sort((a, b) => a.startDate - b.startDate);

    const timelineEl = document.getElementById("timeline");

    function renderTimeline() {
      timelineEl.innerHTML = "";
      for (const block of tripBlocks) {
        const item = document.createElement("article");
        item.className = "timeline-item";
        item.dataset.blockId = block.id;

        const card = document.createElement("div");
        card.className = "timeline-card";

        const topRow = document.createElement("div");
        topRow.className = "top-row";

        const dateTag = document.createElement("div");
        dateTag.className = "date-tag";
        dateTag.textContent = `${block.date} ${block.weekday}`;

        const timeSlot = document.createElement("div");
        timeSlot.className = "time-slot";
        timeSlot.textContent = block.timeSlot;

        const city = document.createElement("div");
        city.className = "city";
        city.textContent = block.city;

        const timeRange = document.createElement("div");
        timeRange.className = "time-range";
        timeRange.textContent = `${block.startTime} – ${block.endTime}（当地时间）`;

        topRow.appendChild(dateTag);
        topRow.appendChild(timeSlot);
        topRow.appendChild(city);
        topRow.appendChild(timeRange);

        const plan = document.createElement("div");
        plan.className = "plan";
        plan.textContent = block.plan;

        const details = document.createElement("div");
        details.className = "details";
        if (block.details && block.details.length) {
          const list = document.createElement("ul");
          for (const d of block.details) {
            const li = document.createElement("li");
            li.textContent = d;
            list.appendChild(li);
          }
          details.appendChild(list);
        }

        const metaRow = document.createElement("div");
        metaRow.className = "meta-row";

        const hotelEl = document.createElement("div");
        hotelEl.className = "meta-hotel";
        hotelEl.innerHTML = `<span class="meta-label">入住酒店：</span>${block.hotel || "待补充替代"}`;

        const noteEl = document.createElement("div");
        noteEl.className = "meta-note";
        noteEl.innerHTML = `<span class="meta-label">备注：</span>${block.note || "待补充替代"}`;

        const costEl = document.createElement("div");
        costEl.className = "meta-cost";
        costEl.innerHTML = `<span class="meta-label">费用/人：</span>${block.cost || "待补充替代"}`;

        metaRow.appendChild(hotelEl);
        metaRow.appendChild(noteEl);
        metaRow.appendChild(costEl);

        card.appendChild(topRow);
        card.appendChild(plan);
        card.appendChild(details);
        card.appendChild(metaRow);

        item.appendChild(card);
        timelineEl.appendChild(item);
      }
    }

    function activateCurrentBlock() {
      const now = getNowInTripTZ();
      document.getElementById("nowText").textContent =
        `当前埃及时间：${now.toLocaleString("zh-CN", { timeZone: TRIP_TIMEZONE })}`;

      let current = tripBlocks[0];
      for (const block of tripBlocks) {
        if (now >= block.startDate && now <= block.endDate) {
          current = block;
          break;
        }
        if (now > block.startDate) {
          current = block;
        }
      }

      document
        .querySelectorAll(".timeline-item")
        .forEach(el => el.classList.remove("active"));

      const activeEl = document.querySelector(
        `.timeline-item[data-block-id="${current.id}"]`
      );
      if (activeEl) {
        activeEl.classList.add("active");
        activeEl.scrollIntoView({ behavior: "smooth", block: "center" });
      }
    }

    renderTimeline();
    activateCurrentBlock();
    setInterval(activateCurrentBlock, 5 * 60 * 1000);
  </script>
</body>
</html>
