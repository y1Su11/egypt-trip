<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>埃及行程 Timeline & Wiki</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --line-color: #d0d0ff;
      --accent: #6c5ce7;
      --accent-soft: #f3f0ff;
      --text-main: #222;
      --text-sub: #555;
      --bg: #fafbff;
      --card-bg: #ffffff;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #f8f7ff 0, #f0f4ff 30%, #f5f7fb 100%);
      color: var(--text-main);
    }

    header {
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(10px);
      background: rgba(250, 251, 255, 0.92);
      border-bottom: 1px solid rgba(0, 0, 0, 0.04);
      padding: 10px 16px;
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      gap: 6px 16px;
    }

    header h1 {
      margin: 0;
      font-size: 18px;
    }

    header .subtitle {
      font-size: 12px;
      color: var(--text-sub);
    }

    header .now {
      margin-left: auto;
      font-size: 12px;
      color: var(--accent);
      white-space: nowrap;
    }

    main {
      max-width: 960px;
      margin: 0 auto;
      padding: 10px 10px 32px;
    }

    /* 布局：左侧菜单 + 右侧内容（移动端变成上下） */
    .app-layout {
      display: flex;
      gap: 12px;
      align-items: flex-start;
    }

    .app-nav {
      position: sticky;
      top: 54px;
      z-index: 15;
      display: flex;
      flex-direction: column;
      gap: 6px;
      min-width: 120px;
      padding: 8px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 4px 16px rgba(15, 23, 42, 0.06);
      border: 1px solid rgba(88, 80, 236, 0.08);
    }

    .nav-item {
      border: none;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 13px;
      cursor: pointer;
      background: transparent;
      text-align: left;
      color: var(--text-sub);
      transition: background 0.15s ease, color 0.15s ease, transform 0.1s ease;
    }

    .nav-item:hover {
      background: rgba(108, 92, 231, 0.06);
      transform: translateY(-1px);
    }

    .nav-item.nav-active {
      background: var(--accent);
      color: #fff;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(76, 81, 191, 0.35);
    }

    .app-content {
      flex: 1 1 auto;
      min-width: 0;
    }

    .page {
      display: none;
    }

    .page.page-active {
      display: block;
    }

    /* ---- Timeline 样式 ---- */

    .timeline {
      position: relative;
      margin-top: 4px;
      padding-left: 32px;
    }

    .timeline::before {
      content: "";
      position: absolute;
      left: 12px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, var(--line-color), #e0e0ff);
      opacity: 0.9;
    }

    .timeline-item {
      position: relative;
      margin-bottom: 18px;
      scroll-margin: 96px;
      transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
    }

    .timeline-item::before {
      content: "";
      position: absolute;
      left: -22px;
      top: 18px;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      border: 3px solid var(--accent);
      background: #fff;
      box-shadow: 0 0 0 4px rgba(108, 92, 231, 0.12);
    }

    .timeline-item.active::before {
      background: var(--accent);
    }

    .timeline-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 12px 14px 10px;
      box-shadow: 0 4px 16px rgba(15, 23, 42, 0.07);
      border: 1px solid rgba(88, 80, 236, 0.09);
    }

    .timeline-item.active .timeline-card {
      background: var(--accent-soft);
      box-shadow: 0 8px 24px rgba(76, 81, 191, 0.2);
      border-color: var(--accent);
      transform: translateY(-2px);
    }

    .top-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px 12px;
      align-items: baseline;
      margin-bottom: 6px;
    }

    .date-tag {
      font-size: 13px;
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(88, 80, 236, 0.08);
      color: var(--accent);
    }

    .time-slot {
      font-size: 13px;
      color: var(--text-sub);
    }

    .city {
      font-size: 14px;
      font-weight: 600;
    }

    .time-range {
      font-size: 12px;
      color: var(--text-sub);
      margin-left: auto;
      white-space: nowrap;
    }

    .plan {
      font-size: 14px;
      margin-bottom: 4px;
    }

    .details {
      font-size: 13px;
      color: var(--text-sub);
      margin-bottom: 4px;
    }

    .details ul {
      margin: 2px 0 2px 18px;
      padding: 0;
    }

    .details li {
      margin-bottom: 1px;
    }

    .meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px 12px;
      font-size: 12px;
      margin-top: 4px;
    }

    .meta-label {
      font-weight: 600;
      color: var(--text-sub);
    }

    .meta-note {
      flex: 1 1 auto;
    }

    .meta-hotel {
      flex: 1 1 100%;
    }

    .meta-cost {
      white-space: nowrap;
    }

    /* ---- Wiki 页样式 ---- */

    .wiki-intro {
      margin-bottom: 10px;
      font-size: 14px;
      color: var(--text-sub);
    }

    .wiki-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
    }

    .wiki-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 12px 14px 10px;
      box-shadow: 0 4px 14px rgba(15, 23, 42, 0.06);
      border: 1px solid rgba(88, 80, 236, 0.06);
      font-size: 13px;
    }

    .wiki-card h2 {
      margin: 0 0 6px;
      font-size: 15px;
    }

    .wiki-card p {
      margin: 4px 0;
    }

    .digit-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 4px;
      font-size: 14px;
      text-align: center;
    }

    .digit-table th,
    .digit-table td {
      border: 1px solid rgba(0, 0, 0, 0.05);
      padding: 4px 6px;
    }

    .digit-table th {
      background: rgba(108, 92, 231, 0.06);
    }

    .arabic-digit {
      font-size: 20px;
    }

    .egp-img {
      width: 100%;
      border-radius: 10px;
      display: block;
      margin-bottom: 4px;
      object-fit: cover;
      max-height: 180px;
    }

    .wiki-badge {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(88, 80, 236, 0.08);
      color: var(--accent);
      margin-bottom: 4px;
    }

    @media (max-width: 768px) {
      header {
        padding: 8px 10px;
      }

      header h1 {
        font-size: 16px;
      }

      main {
        padding: 8px 8px 24px;
      }

      .app-layout {
        flex-direction: column;
      }

      .app-nav {
        position: sticky;
        top: 46px;
        flex-direction: row;
        justify-content: center;
        min-width: 0;
      }

      .nav-item {
        flex: 1 1 auto;
        text-align: center;
      }

      .timeline {
        padding-left: 26px;
      }

      .timeline-item::before {
        left: -18px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>埃及行程 Timeline & Wiki</h1>
    <div class="subtitle">2025-11-21 至 2025-11-30</div>
    <div class="now" id="nowText"></div>
  </header>

  <main>
    <div class="app-layout">
      <!-- 左侧 / 顶部菜单 -->
      <nav class="app-nav">
        <button class="nav-item nav-active" data-page="timeline">Timeline</button>
        <button class="nav-item" data-page="wiki">Wiki</button>
      </nav>

      <!-- 右侧内容区域 -->
      <div class="app-content">
        <!-- Timeline 页面 -->
        <section id="page-timeline" class="page page-active">
          <section class="timeline" id="timeline"></section>
        </section>

        <!-- Wiki 页面 -->
        <section id="page-wiki" class="page">
          <p class="wiki-intro">
            Wiki 页面整理了一些在埃及旅行时常见的数字写法与货币信息，方便快速对照。
          </p>

          <div class="wiki-grid">
            <!-- 数字对应 -->
            <article class="wiki-card">
              <h2>埃及常用数字：阿拉伯数字对照</h2>
              <span class="wiki-badge">Arabic-Indic Numerals</span>
              <p>
                在埃及使用阿拉伯语时，经常能看到一组“东阿拉伯数字”，写法是
                <span class="arabic-digit">٠١٢٣٤٥٦٧٨٩</span>。下面是与常用 0–9 的对应关系：
              </p>
              <table class="digit-table">
                <thead>
                  <tr>
                    <th>西方数字</th>
                    <th>东阿拉伯数字</th>
                    <th>读音（近似拼法）</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td>0</td><td class="arabic-digit">٠</td><td>sifr</td></tr>
                  <tr><td>1</td><td class="arabic-digit">١</td><td>wāḥed</td></tr>
                  <tr><td>2</td><td class="arabic-digit">٢</td><td>etnēn</td></tr>
                  <tr><td>3</td><td class="arabic-digit">٣</td><td>talāta</td></tr>
                  <tr><td>4</td><td class="arabic-digit">٤</td><td>ʾarbaʿa</td></tr>
                  <tr><td>5</td><td class="arabic-digit">٥</td><td>xamsa</td></tr>
                  <tr><td>6</td><td class="arabic-digit">٦</td><td>sitta</td></tr>
                  <tr><td>7</td><td class="arabic-digit">٧</td><td>sabaʿa</td></tr>
                  <tr><td>8</td><td class="arabic-digit">٨</td><td>tamanya</td></tr>
                  <tr><td>9</td><td class="arabic-digit">٩</td><td>tisʿa</td></tr>
                </tbody>
              </table>
              <p>
                超市价签、出租车牌照、餐厅账单等，经常会同时出现西方数字和这组东阿拉伯数字。
              </p>
            </article>

            <!-- 货币介绍 -->
            <article class="wiki-card">
              <h2>埃磅简介（Egyptian Pound, EGP）</h2>
              <span class="wiki-badge">جنيه مصري · LE / E£</span>
              <p>
                埃及官方货币为 <strong>埃磅（Egyptian Pound, 货币代码 EGP）</strong>，阿拉伯语写作
                <strong>جنيه مصري</strong>。1 埃磅 = 100 皮阿斯特（piastre / qirsh）。
              </p>
              <p>常见面额：</p>
              <ul>
                <li>纸币：5, 10, 20, 50, 100, 200 埃磅。</li>
                <li>硬币：主要流通 1 埃磅硬币，有时还能见到 50 皮阿斯特硬币。</li>
              </ul>
              <p>
                纸币正面一般是清真寺等伊斯兰建筑，背面多为古埃及神庙或雕像。账单上金额位置通常使用
                东阿拉伯数字，英文账单则使用西方数字。
              </p>
			  
			  <div class="egp-img-wrap">
			  <div class="egp-caption">
				<a href="https://en.wikipedia.org/wiki/Egyptian_pound#Coins" target="_blank">硬币示例：参见Wikipedia
			  </div>
			  
			  <div class="egp-caption">
				<a href="https://en.wikipedia.org/wiki/Egyptian_pound#Banknotes" target="_blank">纸币示例：参见Wikipedia
			  </div>
          </div>
            </article>
			
          </div>
        </section>
      </div>
    </div>
  </main>

  <script>
    const TRIP_TIMEZONE = "Africa/Cairo";

    // ---- Timeline 数据：与之前版本相同，可继续在这里微调 ----
    const tripBlocks = [
      {
        id: "2025-11-21-hurghada-arrival",
        date: "2025-11-21",
        weekday: "周五",
        timeSlot: "全天",
        city: "赫尔格达",
        plan: "从德国出发，经慕尼黑或法兰克福飞往赫尔格达，抵达后入住公寓，晚间自由活动。",
        details: [
          "MUC → HRG · Condor DE24 · 08:20 – 13:30",
          "FRA → HRG · Condor DE30 · 10:30 – 16:05",
          "FRA → HRG · Lufthansa LH4374（待补充）"
        ],
        note: "机场安排司机接机，送达公寓。",
        hotel: "Lilly Apartments Agency, Turkish Air Lines Building, Elhadaba Rd, Hurghada, Red Sea Governorate 84517, Egypt",
        cost: "待补充",
        startTime: "08:00",
        endTime: "23:00"
      },
      {
        id: "2025-11-22-hurghada-dolphin",
        date: "2025-11-22",
        weekday: "周六",
        timeSlot: "白天",
        city: "赫尔格达",
        plan: "追海豚与浮潜一日游，傍晚返回赫尔格达，自由活动。",
        details: [
          "船上行程：海豚观赏、浮潜等（具体船公司与时刻待补充）"
        ],
        note: "需自备泳具、防晒用品等。",
        hotel: "Lilly Apartments Agency, Turkish Air Lines Building, Elhadaba Rd, Hurghada, Red Sea Governorate 84517, Egypt",
        cost: "待补充",
        startTime: "08:00",
        endTime: "20:00"
      },
      {
        id: "2025-11-23-hurghada-to-luxor",
        date: "2025-11-23",
        weekday: "周日",
        timeSlot: "全天",
        city: "赫尔格达 → 卢克索",
        plan: "从赫尔格达出发前往卢克索，途中参观丹德拉神庙，下午抵达卢克索入住酒店，晚餐在卢克索市区餐厅。",
        details: [
          "08:00 从赫尔格达出发，车程约 3 小时。",
          "沿途停留丹德拉神庙（具体时间待补充）。",
          "下午：卢克索东岸自由活动。",
          "晚餐餐厅推荐：Sofra / Loqma。"
        ],
        note: "车上路餐或途中午餐，具体安排待补充。",
        hotel: "Steigenberger Resort Achti, Al Awameya, East Bank, 83951 Luxor, Egypt",
        cost: "待补充",
        startTime: "08:00",
        endTime: "21:30"
      },
      {
        id: "2025-11-24-luxor-balloon-westbank",
        date: "2025-11-24",
        weekday: "周一",
        timeSlot: "清晨至下午",
        city: "卢克索",
        plan: "清晨热气球体验，之后参观西岸景点：帝王谷、王后谷、女王庙等，午餐在 Oriental 餐厅。",
        details: [
          "清晨：热气球飞行，预计全程约 3 小时，含接送与飞行。",
          "白天：西岸观光，景点包含帝王谷、王后谷、女王庙等（实际顺序以当地安排为准）。",
          "午餐：Oriental 餐厅 13:30–15:00。"
        ],
        note: "如风况不佳，热气球顺延至 11 月 25 日。",
        hotel: "Steigenberger Resort Achti, Al Awameya, East Bank, 83951 Luxor, Egypt",
        cost: "待补充",
        startTime: "04:30",
        endTime: "18:30"
      },
      {
        id: "2025-11-25-luxor-eastbank",
        date: "2025-11-25",
        weekday: "周二",
        timeSlot: "白天与夜间",
        city: "卢克索",
        plan: "根据情况安排热气球备用场次，参观卡尔纳克神庙与卢克索神庙，夜间可观赏灯光夜景。",
        details: [
          "如前一日热气球未成行，则在 11 月 25 日清晨起飞，约 3 小时。",
          "下午：卡尔纳克神庙参观（开放时间待补充）。",
          "傍晚或夜间：卢克索神庙夜景参观。"
        ],
        note: "具体时间根据景区开放与热气球安排进行调整。",
        hotel: "Steigenberger Resort Achti, Al Awameya, East Bank, 83951 Luxor, Egypt",
        cost: "待补充",
        startTime: "06:00",
        endTime: "22:00"
      },
      {
        id: "2025-11-26-luxor-to-cairo",
        date: "2025-11-26",
        weekday: "周三",
        timeSlot: "上午至晚上",
        city: "卢克索 → 开罗",
        plan: "上午在卢克索自由活动，下午搭乘航班前往开罗，入住金字塔附近酒店。",
        details: [
          "上午：卢克索市区漫步与自由时间。",
          "下午：LXR → CAI · EgyptAir MS75 · 14:20 – 15:30。",
          "晚上：酒店周边自由活动。"
        ],
        note: "需提前到达机场办理值机与安检。",
        hotel: "West Pyramids Hotel, 4 Abou Al Hool Al Seiahi, Giza, Cairo, Egypt",
        cost: "待补充",
        startTime: "09:00",
        endTime: "22:30"
      },
      {
        id: "2025-11-27-cairo-old-city",
        date: "2025-11-27",
        weekday: "周四",
        timeSlot: "全天",
        city: "开罗",
        plan: "萨拉丁城堡与穆罕默德·阿里清真寺，下午埃及博物馆，晚上开罗塔与旋转餐厅晚餐。",
        details: [
          "上午：萨拉丁城堡 + 穆罕默德·阿里清真寺。",
          "下午：埃及博物馆参观，停留约 2 小时。",
          "晚上：开罗塔 + 旋转餐厅晚餐。"
        ],
        note: "塔顶及餐厅需提前预约时间。",
        hotel: "Classic Style 3 bedrooms Zamalek apartment, Zamalek, Cairo（详细地址待补充）",
        cost: "待补充",
        startTime: "09:00",
        endTime: "22:30"
      },
      {
        id: "2025-11-28-giza-gem",
        date: "2025-11-28",
        weekday: "周五",
        timeSlot: "全天",
        city: "开罗",
        plan: "吉萨金字塔与狮身人面像，大埃及博物馆（GEM），晚上休息。",
        details: [
          "上午：吉萨金字塔群 + 狮身人面像，预留充足时间拍照与步行。",
          "下午：大埃及博物馆（GEM），按预约时段参观。",
          "晚上：返回住宿地休息。"
        ],
        note: "GEM 开放与预约规则如有更新，可根据官方信息调整参观时段。",
        hotel: "Classic Style 3 bedrooms Zamalek apartment, Zamalek, Cairo（详细地址待补充）",
        cost: "待补充",
        startTime: "09:00",
        endTime: "22:00"
      },
      {
        id: "2025-11-29-cairo-museums-bazaar",
        date: "2025-11-29",
        weekday: "周六",
        timeSlot: "全天",
        city: "开罗",
        plan: "文明类博物馆与洞穴教堂，下午哈利利市集 + Zamalek 半岛 city walk，晚上本地轻食或酒店休息。",
        details: [
          "上午：文明相关博物馆（具体馆名与时间待补充）。",
          "中午：洞穴教堂（Cave Church）参观，出发时间约早上 9 点。",
          "下午：哈利利市集 + Zamalek 半岛 city walk。",
          "晚上：酒店附近本地餐厅轻食或回房休息。"
        ],
        note: "当日以轻松城市体验为主，可根据体力微调节奏。",
        hotel: "Cairo Heliopolis Apartment, 1, Heliopolis, 11799 Cairo, Egypt",
        cost: "待补充",
        startTime: "08:30",
        endTime: "22:30"
      },
      {
        id: "2025-11-30-return-to-germany",
        date: "2025-11-30",
        weekday: "周日",
        timeSlot: "上午至晚上",
        city: "开罗 → 德国",
        plan: "从开罗机场出发，经法兰克福或慕尼黑返回德国，行程结束。",
        details: [
          "CAI → MUC · EgyptAir MS787 · 10:05 – 13:10。",
          "CAI → FRA · Lufthansa LH583 · 16:55 – 20:30。",
          "根据机票实际信息选择对应航班。"
        ],
        note: "建议至少提前 3 小时抵达机场。",
        hotel: "无（前一晚入住 Cairo Heliopolis Apartment，清晨退房后前往机场）。",
        cost: "待补充",
        startTime: "06:00",
        endTime: "23:00"
      }
    ];

    // ---- 工具函数：把“某天某时”的字符串转成指定时区的 Date ----
    function toZonedDate(dateStr, timeStr, timeZone) {
      const [year, month, day] = dateStr.split("-").map(Number);
      const [hour, minute] = timeStr.split(":").map(Number);
      const utcDate = new Date(Date.UTC(year, month - 1, day, hour, minute));
      const formatter = new Intl.DateTimeFormat("en-US", {
        timeZone,
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "2-digit",
        minute: "2-digit",
        hour12: false
      });
      const parts = formatter.formatToParts(utcDate);
      const obj = {};
      for (const p of parts) obj[p.type] = p.value;
      return new Date(
        Number(obj.year),
        Number(obj.month) - 1,
        Number(obj.day),
        Number(obj.hour),
        Number(obj.minute)
      );
    }

    function getNowInTripTZ() {
      const now = new Date();
      const str = now.toLocaleString("en-US", { timeZone: TRIP_TIMEZONE });
      return new Date(str);
    }

    // 预处理：计算 block 开始结束时间并排序
    tripBlocks.forEach(block => {
      block.startDate = toZonedDate(block.date, block.startTime, TRIP_TIMEZONE);
      block.endDate = toZonedDate(block.date, block.endTime, TRIP_TIMEZONE);
    });
    tripBlocks.sort((a, b) => a.startDate - b.startDate);

    const timelineEl = document.getElementById("timeline");

    function renderTimeline() {
      timelineEl.innerHTML = "";
      for (const block of tripBlocks) {
        const item = document.createElement("article");
        item.className = "timeline-item";
        item.dataset.blockId = block.id;

        const card = document.createElement("div");
        card.className = "timeline-card";

        const topRow = document.createElement("div");
        topRow.className = "top-row";

        const dateTag = document.createElement("div");
        dateTag.className = "date-tag";
        dateTag.textContent = `${block.date} ${block.weekday}`;

        const timeSlot = document.createElement("div");
        timeSlot.className = "time-slot";
        timeSlot.textContent = block.timeSlot;

        const city = document.createElement("div");
        city.className = "city";
        city.textContent = block.city;

        const timeRange = document.createElement("div");
        timeRange.className = "time-range";
        timeRange.textContent = `${block.startTime} – ${block.endTime}（当地时间）`;

        topRow.appendChild(dateTag);
        topRow.appendChild(timeSlot);
        topRow.appendChild(city);
        topRow.appendChild(timeRange);

        const plan = document.createElement("div");
        plan.className = "plan";
        plan.textContent = block.plan;

        const details = document.createElement("div");
        details.className = "details";
        if (block.details && block.details.length) {
          const list = document.createElement("ul");
          for (const d of block.details) {
            const li = document.createElement("li");
            li.textContent = d;
            list.appendChild(li);
          }
          details.appendChild(list);
        }

        const metaRow = document.createElement("div");
        metaRow.className = "meta-row";

        const hotelEl = document.createElement("div");
        hotelEl.className = "meta-hotel";
        hotelEl.innerHTML = `<span class="meta-label">入住酒店：</span>${block.hotel || "待补充"}`;

        const noteEl = document.createElement("div");
        noteEl.className = "meta-note";
        noteEl.innerHTML = `<span class="meta-label">备注：</span>${block.note || "待补充"}`;

        const costEl = document.createElement("div");
        costEl.className = "meta-cost";
        costEl.innerHTML = `<span class="meta-label">费用/人：</span>${block.cost || "待补充替代"}`;

        metaRow.appendChild(hotelEl);
        metaRow.appendChild(noteEl);
        metaRow.appendChild(costEl);

        card.appendChild(topRow);
        card.appendChild(plan);
        card.appendChild(details);
        card.appendChild(metaRow);

        item.appendChild(card);
        timelineEl.appendChild(item);
      }
    }

    function activateCurrentBlock() {
      const now = getNowInTripTZ();
      document.getElementById("nowText").textContent =
        `当前埃及时间：${now.toLocaleString("zh-CN", { timeZone: TRIP_TIMEZONE })}`;

      let current = tripBlocks[0];
      for (const block of tripBlocks) {
        if (now >= block.startDate && now <= block.endDate) {
          current = block;
          break;
        }
        if (now > block.startDate) {
          current = block;
        }
      }

      document
        .querySelectorAll(".timeline-item")
        .forEach(el => el.classList.remove("active"));

      const activeEl = document.querySelector(
        `.timeline-item[data-block-id="${current.id}"]`
      );
      if (activeEl) {
        activeEl.classList.add("active");
        activeEl.scrollIntoView({ behavior: "smooth", block: "center" });
      }
    }

    // 菜单切换：Timeline / Wiki
    function setupNav() {
      const buttons = document.querySelectorAll(".nav-item");
      buttons.forEach(btn => {
        btn.addEventListener("click", () => {
          const page = btn.dataset.page;
          buttons.forEach(b => b.classList.remove("nav-active"));
          btn.classList.add("nav-active");
          document
            .querySelectorAll(".page")
            .forEach(p => p.classList.remove("page-active"));
          document
            .getElementById(`page-${page}`)
            .classList.add("page-active");
        });
      });
    }

    // 初始化
    renderTimeline();
    activateCurrentBlock();
    setupNav();
    setInterval(activateCurrentBlock, 5 * 60 * 1000);
  </script>
</body>
</html>
